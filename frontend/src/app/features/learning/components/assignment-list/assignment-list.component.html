<div class="assignments-container">
  <div class="assignments-header">
    <h3 class="assignments-title">Assignments</h3>
    <div class="assignments-badge">{{assignments.length}} Total</div>
  </div>

  <div class="assignments-grid">
    <div *ngFor="let assignment of assignments" class="assignment-card">
      <div class="card-header">
        <div class="assignment-info">
          <h4 class="assignment-title">{{assignment.title}}</h4>
          <p class="assignment-description">{{assignment.description}}</p>
        </div>
        <div class="status-badge" [ngClass]="getStatusClass(assignment.status)">
          <ng-container [ngSwitch]="assignment.status">
            <svg *ngSwitchCase="'graded'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
            <svg *ngSwitchCase="'submitted'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
            <svg *ngSwitchCase="'overdue'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
            <svg *ngSwitchDefault width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
          </ng-container>
          <span class="status-text">{{assignment.status | titlecase}}</span>
        </div>
      </div>
      
      <div class="card-content">
        <div class="assignment-meta">
          <div class="meta-item">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            <span>Due {{formatDate(assignment.dueDate)}}</span>
            <span *ngIf="getDaysUntilDue(assignment.dueDate) > 0 && assignment.status === 'pending'" 
                  class="days-left">({{getDaysUntilDue(assignment.dueDate)}} days left)</span>
          </div>
          <div class="meta-item">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
            <span>{{assignment.maxPoints}} points</span>
          </div>
        </div>

        <div class="assignment-actions">
          <div *ngIf="assignment.status === 'graded' && assignment.grade" class="grade-badge">
            {{assignment.grade}}/{{assignment.maxPoints}}
          </div>
          
          <button *ngIf="assignment.status === 'pending'" 
                  class="submit-button" 
                  (click)="openSubmissionDialog(assignment)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17,8 12,3 7,8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            Submit
          </button>

          <button *ngIf="assignment.status === 'graded' && assignment.feedback" 
                  class="feedback-button"
                  (click)="openFeedbackDialog(assignment)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            Feedback
          </button>
        </div>

        <div *ngIf="assignment.submittedAt" class="submitted-date">
          Submitted on {{formatDate(assignment.submittedAt)}}
        </div>
      </div>
    </div>
  </div>
</div>
<div *ngIf="showSubmissionDialog" class="dialog-overlay" (click)="closeSubmissionDialog()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h3>Submit Assignment: {{selectedAssignment?.title}}</h3>
      <p>{{selectedAssignment?.description}}</p>
    </div>
    
    <div class="dialog-body">
      <div class="assignment-details">
        <div class="detail-item">
          <span class="detail-label">Due Date:</span> {{formatDate(selectedAssignment?.dueDate)}}
        </div>
        <div class="detail-item">
          <span class="detail-label">Max Points:</span> {{selectedAssignment?.maxPoints}}
        </div>
      </div>

      <div *ngIf="selectedAssignment?.submissionType === 'text'" class="form-group">
        <label for="submission">Your Submission</label>
        <textarea 
          id="submission"
          [(ngModel)]="submissionText"
          placeholder="Enter your text submission here..."
          class="submission-textarea">
        </textarea>
      </div>

      <div *ngIf="selectedAssignment?.submissionType === 'file'" class="form-group">
        <label for="file">Upload File</label>
        <input 
          id="file"
          type="file"
          (change)="onFileSelected($event)"
          accept=".pdf,.doc,.docx,.zip,.txt"
          class="file-input">
        <p class="file-help">Accepted formats: PDF, DOC, DOCX, ZIP, TXT</p>
      </div>

      <div class="dialog-actions">
        <button class="cancel-button" (click)="closeSubmissionDialog()">Cancel</button>
        <button class="submit-button" (click)="submitAssignmentVoid()">Submit Assignment</button>
      </div>
    </div>
  </div>
</div>
<div *ngIf="showFeedbackDialog" class="dialog-overlay" (click)="closeFeedbackDialog()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h3>Instructor Feedback</h3>
      <p>Grade: {{selectedAssignment?.grade}}/{{selectedAssignment?.maxPoints}}</p>
    </div>
    <div class="dialog-body">
      <div class="feedback-content">
        <p>{{selectedAssignment?.feedback}}</p>
      </div>
    </div>
  </div>
</div>
