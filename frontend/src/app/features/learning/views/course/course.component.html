<div class="course-container">
  <div class="container">
    <button class="back-button" (click)="goBack()">
      <svg
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="m12 19-7-7 7-7" />
        <path d="M19 12H5" />
      </svg>
      Back to Dashboard
    </button>
    <div class="course-header">
      <div class="course-info">
        <h1 class="course-title">{{ courseData.title }}</h1>
        <div class="course-meta">
          <div class="instructor-info">
            <div class="avatar">
              <img
                [src]="courseData.instructor.avatar"
                [alt]="courseData.instructor.name"
              />
            </div>
            <span>{{ courseData.instructor.name }}</span>
          </div>
          <div class="rating">
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="currentColor"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polygon
                points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"
              />
            </svg>
            <span>4.8 (1,234 reviews)</span>
          </div>
          <div class="students">
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
              <circle cx="9" cy="7" r="4" />
              <path
                d="m22 21-3-3m0 0a2 2 0 0 0-3-3 2 2 0 0 0-3 3 2 2 0 0 0 3 3 2 2 0 0 0 3-3Z"
              />
            </svg>
            <span>5,678 students</span>
          </div>
        </div>

        <div class="progress-section">
          <div class="progress-container">
            <div class="progress-labels">
              <span>Progress</span>
              <span>{{ courseData.progress }}%</span>
            </div>
            <div class="progress-bar">
              <div
                class="progress-fill"
                [style.width.%]="courseData.progress"
              ></div>
            </div>
          </div>
          <div class="completion-badge">
            {{ getCompletedModulesCount() }}/{{ courseData.modules.length }}
            modules completed
          </div>
        </div>
      </div>
    </div>

    <div class="course-content">
      <div class="main-content">
        <app-video-player
          [module]="getCurrentModule()"
          (moduleComplete)="handleModuleComplete($event)"
        >
        </app-video-player>
        <div class="tabs-container">
          <div class="tabs-list">
            <button
              class="tab-trigger"
              [class.active]="activeTab === 'assignments'"
              (click)="setActiveTab('assignments')"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                />
                <polyline points="14,2 14,8 20,8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10,9 9,9 8,9" />
              </svg>
              Assignments
            </button>
            <button
              class="tab-trigger"
              [class.active]="activeTab === 'resources'"
              (click)="setActiveTab('resources')"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-code-icon lucide-code"
              >
                <path d="m16 18 6-6-6-6" />
                <path d="m8 6-6 6 6 6" />
              </svg>
              Resources
            </button>
            <button
              class="tab-trigger"
              [class.active]="activeTab === 'grades'"
              (click)="setActiveTab('grades')"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-book-icon lucide-book"
              >
                <path
                  d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"
                />
              </svg>
              Grades
            </button>
            <button
              class="tab-trigger"
              [class.active]="activeTab === 'discussion'"
              (click)="setActiveTab('discussion')"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                />
              </svg>
              Discussion
            </button>
          </div>
          <div class="tab-content">
            <div *ngIf="activeTab === 'assignments'" class="tab-panel">
              <app-assignment-list
                [assignments]="courseData.assignments"
                (submitAssignment)="handleAssignmentSubmit($event)"
              >
              </app-assignment-list>
            </div>

            <div *ngIf="activeTab === 'resources'" class="tab-panel">
              <div class="resources-card">
                <h3 class="resources-title">Module Resources</h3>
                <p class="resources-subtitle">
                  {{ getCurrentModule().title }} - Resources and Downloads
                </p>
                <div
                  class="resources-list"
                  *ngIf="getCurrentModule().resources.length > 0"
                >
                  <div
                    *ngFor="let resource of getCurrentModule().resources"
                    class="resource-item"
                  >
                    <div class="resource-info">
                      <div class="resource-icon">
                        <svg
                          *ngIf="resource.type === 'pdf'"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="pdf-icon"
                        >
                          <path
                            d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                          />
                          <polyline points="14,2 14,8 20,8" />
                        </svg>
                        <svg
                          *ngIf="resource.type === 'zip'"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="zip-icon"
                        >
                          <polyline points="16,18 22,12 16,6" />
                          <polyline points="8,6 2,12 8,18" />
                        </svg>
                        <svg
                          *ngIf="resource.type === 'link'"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="link-icon"
                        >
                          <path
                            d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
                          />
                          <polyline points="15,3 21,3 21,9" />
                          <line x1="10" y1="14" x2="21" y2="3" />
                        </svg>
                        <svg
                          *ngIf="resource.type === 'code'"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="code-icon"
                        >
                          <polyline points="16,18 22,12 16,6" />
                          <polyline points="8,6 2,12 8,18" />
                        </svg>
                      </div>
                      <div class="resource-details">
                        <p class="resource-name">{{ resource.name }}</p>
                        <p class="resource-size">{{ resource.size }}</p>
                      </div>
                    </div>
                    <button
                      class="download-btn"
                      (click)="downloadResource(resource)"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7,10 12,15 17,10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                      </svg>
                      Download
                    </button>
                  </div>
                </div>
                <div
                  class="no-resources"
                  *ngIf="getCurrentModule().resources.length === 0"
                >
                  <svg
                    width="48"
                    height="48"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"
                    />
                  </svg>
                  <p>No resources available for this module.</p>
                </div>
              </div>
            </div>

            <div *ngIf="activeTab === 'grades'" class="tab-panel">
              <div class="grades-content">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="lucide lucide-book-icon lucide-book"
                      >
                        <path
                          d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"
                        />
                      </svg>
                      Grade Summary
                    </h3>
                    <p class="card-description">Your performance overview</p>
                  </div>
                  <div class="card-content">
                    <div class="grade-stats">
                      <div class="stat">
                        <div class="stat-value primary">
                          {{ getAverageGrade() }}%
                        </div>
                        <div class="stat-label">Average Grade</div>
                      </div>
                      <div class="stat">
                        <div class="stat-value secondary">
                          {{ getCompletedAssignments() }}
                        </div>
                        <div class="stat-label">Completed</div>
                      </div>
                      <div class="stat">
                        <div class="stat-value accent">
                          {{ getPendingAssignments() }}
                        </div>
                        <div class="stat-label">Pending</div>
                      </div>
                    </div>

                    <div class="assignments-list">
                      <div
                        *ngFor="let assignment of getGradedAssignments()"
                        class="assignment-item"
                      >
                        <div class="assignment-info">
                          <div class="assignment-title">
                            {{ assignment.title }}
                          </div>
                          <div class="assignment-date">
                            Submitted {{ formatDate(assignment.submittedAt) }}
                          </div>
                        </div>
                        <div
                          class="grade-badge"
                          [ngClass]="
                            getGradeBadgeClass(
                              assignment.grade,
                              assignment.maxPoints
                            )
                          "
                        >
                          {{ assignment.grade }}/{{ assignment.maxPoints }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="activeTab === 'discussion'" class="tab-panel">
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">Course Discussion</h3>
                  <p class="card-description">
                    Connect with your instructor and fellow students
                  </p>
                </div>
                <div class="card-content">
                  <div class="empty-state">
                    <svg
                      width="48"
                      height="48"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path
                        d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                      />
                    </svg>
                    <p>Discussion forum coming soon!</p>
                    <p class="small">
                      Connect with your instructor and classmates to discuss
                      course content.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="sidebar">
        <app-course-progress
          [modules]="courseData.modules"
          [currentModuleId]="currentModuleId"
          [progress]="courseData.progress"
          (moduleSelect)="setCurrentModule($event)"
        >
        </app-course-progress>
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Instructor</h3>
          </div>
          <div class="card-content">
            <div class="instructor-profile">
              <div class="avatar">
                <img
                  [src]="courseData.instructor.avatar"
                  [alt]="courseData.instructor.name"
                />
              </div>
              <div class="instructor-details">
                <div class="instructor-name">
                  {{ courseData.instructor.name }}
                </div>
                <div class="instructor-role">Senior Developer</div>
              </div>
            </div>
            <button class="message-button" (click)="messageInstructor()">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                />
              </svg>
              Message Instructor
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
